/*! jq-slider - v0.1.1 - 2014-05-08
* https://github.com/toruta39/jq-slider
* Copyright (c) 2014 Joshua Zhang; Licensed MIT */
!function(a){a.fn.slider=function(b){function c(){w.addClass("dragging"),a(window).on(a.fn.slider.options.pointermove,g).on(a.fn.slider.options.pointerup,e)}function d(){w.removeClass("dragging"),a(window).off(a.fn.slider.options.pointermove,g).off(a.fn.slider.options.pointerup,e)}function e(){v=0,d(),x.trigger("jq-slider.release")}function f(a){var d,e={};a.preventDefault(),a.stopPropagation(),h(),x.trigger("jq-slider.grab"),b.isTouchDevice?(j=a.originalEvent.touches[0].clientX,k=a.originalEvent.touches[0].clientY):(j=a.clientX,k=a.clientY),r&&(x.left=j-n-b.scrubberWidth/2,x.left=Math.max(0,Math.min(r,x.left)),e.x=x.x=x.left/r),s&&(x.top=k-o-b.scrubberHeight/2,x.top=Math.max(0,Math.min(s,x.top)),e.y=x.y=x.top/s),i(),x.trigger("jq-slider.change",e),d=x.$scrubber.offset(),l=d.left,m=d.top,c()}function g(a){if(a.preventDefault(),!b.isTouchDevice)if(1!==a.which){if(v++,v>2)return void e(a);if(v>1)return}else v=0;var c={};b.isTouchDevice?(x.left=a.originalEvent.touches[0].clientX,x.top=a.originalEvent.touches[0].clientY):(x.left=a.clientX,x.top=a.clientY),x.left+=-j+l-n,x.top+=-k+m-o,x.left=Math.max(0,Math.min(x.left,r)),x.top=Math.max(0,Math.min(x.top,s)),r&&(c.x=x.x=x.left/r),s&&(c.y=x.y=x.top/s),i(),x.trigger("jq-slider.change",c)}function h(){var a=x.$container.offset();n=a.left,o=a.top,p=x.$container.width(),q=x.$container.height()}function i(){x.left=r*x.x,x.$scrubber.css("left",x.x*t*100+"%"),x.$progress&&x.$progress.css("width",x.x*t*100+"%"),x.top=s*x.y,x.$scrubber.css("top",x.y*u*100+"%"),x.$progress&&x.$progress.css("height",x.y*u*100+"%")}b=a.extend({},a.fn.slider.options,b);var j,k,l,m,n,o,p,q,r,s,t,u,v=0,w=a("body"),x=this;return this.x=0,this.y=0,this.left=0,this.top=0,this.$container=b.container instanceof a?b.container:this,this.$scrubber=b.scrubber instanceof a?b.scrubber:a('<div class="scrubber"></div>').appendTo(this),b.progress===!0?this.$progress=a('<div class="progress"></div>').appendTo(this):b.progress instanceof a&&(this.$progress=b.progress),this.setValue=function(a,b){"number"==typeof a&&(x.x=a),"number"==typeof b&&(x.y=b),i()},this.setSize=function(a,b){this.$container.width(null===a?"auto":a),this.$container.height(null===b?"auto":b),this.updateSize()},this.updateSize=function(){h(),r=Math.max(0,p-b.scrubberWidth),s=Math.max(0,q-b.scrubberHeight),t=1-b.scrubberWidth/p,u=1-b.scrubberHeight/q,i()},"static"===this.$container.css("position")&&this.$container.css({position:"relative",minHeight:b.scrubberHeight}),this.$scrubber.css({width:b.scrubberWidth,height:b.scrubberHeight,position:"absolute"}),this.updateSize(),(b.initialX||b.initialY)&&this.setValue(b.initialX,b.initialY),this.$container.on(a.fn.slider.options.pointerdown,f),this};var b=/iPhone|iPod|iPad|Android/i.test(navigator.userAgent);a.fn.slider.options={isTouchDevice:b,pointerdown:b?"touchstart":"mousedown",pointermove:b?"touchmove":"mousemove",pointerup:b?"touchend":"mouseup",scrubberWidth:16,scrubberHeight:16,initialX:0,initialY:0}}(jQuery);